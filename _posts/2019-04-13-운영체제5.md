---
layout: post
title:  "운영체제4"
date:   2019-04-13 18:34:10 +0700
categories: [operating system]
---


> 서울과학기술대학교 3학년 교과과정으로 배운 "운영체제" 시험 공부 및 정리용 포스팅 😆
>
> _4강 - Threads_
>
> _🙋 4강에서 설명할 수 있어야 할 것들 🙋_
>
> - 쓰레드의 개념
> - 쓰레드와 프로세스의 차이점

<br>

## 💁 What is 쓰레드(Thread)?
---

- _프로세스의 문제점_

	프로세스가 생성되면 각 프로세스마다 주소공간이 생기는데 만약 실행되고 있는 프로그램이 너무 많아서 주소공간이 많아지게 되면 메모리적으로 문제가 된다.

	또 메모리 뿐만 아니라 주소공간을 만들때마다 타임딜레이가 생겨서 공간적, 시간적인 문제가 발생할 수 있다.

	<br>

- _웹 서버_

	> 갑자기 웹 서버가 왜 나오지?

	웹 서버도 웹 페이지를 전달하는 프로그램이다!

	![운영체제17](https://user-images.githubusercontent.com/31889335/56079775-c4d2c080-5e33-11e9-8f6f-37dc0795d0e2.PNG)

	위 그림에서 볼 수 있듯이 웹 서버도 CPU 할당을 받아 실행되는 프로그램이다.

	즉, 웹 서버가 작동하면 프로세스가 생성되는 것이다.

	웹 서버는 엄청 많은 사람들에게 같은 시간에 많은 서비스를 제공해야 한다.

	만약 웹 서버가 한번에 한명의 유저가 요청한 I/O 동작만을 수행할 수 있다면 어떻게 될까?

	다른 클라이언트의 요청을 처리할 수 없게 된다!

	즉, 웹 서버 프로세스는 동시적으로 발생하는 서비스들을 처리해야한다.

	또한 유저는 하나의 웹 서버만을 사용하는 것이 아니라 여러 웹 서버를 동시에 사용한다.

	이때, 각 웹 서버 프로세스는 모두 자신들의 리소스를 가지고 있다. 하지만 실행되는 웹 서버 프로세스가 많아질수록 그에 비례하여 필요로 하는 리소스도 많아진다.

	즉, 컴퓨터 입장에서는 메모리 낭비가 발생하고 프로세스를 생성하는데 타임 딜레이가 발생한다.

	<br>

- _쓰레드를 사용하자!_

	__쓰레드(Thread)__ 라는 것은 코드(텍스트), 데이터, 리소스, 힙 등을 공유하는 존재이다. (하지만 스택, 레지스터, 쓰레드ID는 공유하지 못함)

	따라서 쓰레드를 생성할 때 주소공간의 콛, 데이터, 리소스, 힙 공간을 새로 생성할 필요가 없다. 공유되기 때문이다

	이 모든 것을 각각 따로 만드는 프로세스보다 쓰레드가 메모리 부분에서 훨씬 가볍다. 또 쓰레드를 생성하는 시간도 적게 걸린다.

	<br>

## ❓❗ 그래서 쓰레드의 정의는 뭐야?
---

- _쓰레드는 CPU_

	<br>

## 👪 싱글쓰레드와 멀티쓰레드
---

- _말 그대로!_

	싱글 쓰레드는 한 프로세스에 쓰레드가 하나 있는 것이고, 멀티 쓰레드는 한 프로세스에 쓰레드가 여러개 있는 것이다.

	![운영체제18](https://user-images.githubusercontent.com/31889335/56079936-006e8a00-5e36-11e9-8d37-eb9b1972034b.PNG)

	위 그림에서 싱글 쓰레드를 가진 프로세스와 멀티 쓰레드를 가진 프로세스의 모습을 볼 수 있다.

	멀티 쓰레드를 가진 프로세스를 보면 코드, 데이터, 파일 부분을 공유하고 각각 서로 다른 레지스터와 스택을 갖는 모습을 볼 수 있다.

	<br>

## 💥 쓰레드 vs 프로세스
---

- _쓰레드는 프로세스에 비해 상대적으로 메모리와 시간 비용이 적다._

하지만 쓰레드가 메모리와 시간 비용이 전혀 들지 않는다는 것은 절대 아니다!

fork를 해서 새로운 프로세스를 만들고, 이때는 주소 공간 구조가 똑같이 따로 만들어지는데 쓰레드를 pthread_create()를 사용하여 만들때는 스택부분만 따로 하나 만들어지는 것이다.

![운영체제19](https://user-images.githubusercontent.com/31889335/56080024-c5208b00-5e36-11e9-8609-ba794fbbe814.PNG)

이렇게 말이다!

<br>

- _
