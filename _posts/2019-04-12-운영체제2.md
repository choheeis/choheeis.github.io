---
layout: post
title:  "운영체제2"
date:   2019-04-12 18:34:10 +0700
categories: [operating system]
---


> 서울과학기술대학교 3학년 교과과정으로 배운 "운영체제" 시험 공부 및 정리용 포스팅 😆
>
> _2강 - Operating System Structures_
>
> _🙋 2강에서 설명할 수 있어야 할 것들 🙋_
>
> - 운영체제의 서비스
> - 시스템 콜에 대하여
> - 운영체제의 구조
> - 컴퓨터 시스템의 부팅 과정

<br>

##  👮 운영체제의 서비스
---

- _운영체제는 아래의 여러 서비스들을 제공한다_

	- 유저 인터페이스를 제공한다.

		CLI = Command Line Interface

		GUI = Graphics User Interface

	- 프로그램을 실행시켜준다.

		프로그램을 메모리에 올려서 실행시키고, 종료한다.

	- 입출력을 동작시킨다.

		키보드와 마우스로부터 입력을 받고, 모니터와 프린터로 출력을 해준다.

	- 파일 시스템을 조작한다.

		파일이나 디렉토리를 읽고 쓰며, 파일들을 생성하고 삭제하고 검색한다.

	- 프로세스간에 정보를 교환하여 소통하게 해준다.

	- 에러를 감지해준다.

		하드웨어 에러나 입출력 에러, 유저가 사용중인 프로그램 에러를 감지한다.

		메모리 에러, 네트워크 연결 에러, 용지 부족 에러, 사용자의 불법적인 메모리 접근 감지 등등

	<br>

- _운영체제는 자신의 효율적인 작동을 위해 아래와 같은 작동을 한다_

	- 효율적으로 리소스를 할당한다.

		주로 멀티 유저 경우나 멀티태스킹 경우에 이 동작을 한다.

		어떤 프로세스에게 얼만큼의 리소스를 할당해야 효율적인지 계산하여 할당한다.	

	- 어떤 유저가 어떤 리소스를 얼만큼 사용하고 있는지 체크한다.

	- 보호 및 보안 기능을 작동한다.

		보호 = 시스템 리소스에 아무나 접근할 수 없도록 통제한다.

		보안 = 유저 인증기능(사용자 비밀번호 확인 등), 유저의 잘못된 접근 시도를 방어한다.

	<br>

## 📺 운영체제의 유저 인터페이스
---

- _CLI_

	__Command Line Interface__ 의 약자이다.

	키보드를 사용해서 사용자와 컴퓨터가 상호 작용하는 방식이다.

	![운영체제8](https://user-images.githubusercontent.com/31889335/56050388-bc707c00-5d86-11e9-9338-8cc417a5186e.PNG)

	위와 같이 키보드로 명령어를 입력하여 컴퓨터 시스템을 다루는 것이다.	

	사용자들이 명령어들을 외워야 한다.

	<br>

- _GUI_

	__Graphic User Interface__ 의 약자이다.

	마우스를 사용해서 사용자와 컴퓨터가 상호 작용하는 방식이다.

	현대의 유저들에게 가장 친근한 컴퓨터 조작 방식이다.

	운영체제 중 하나인 리눅스와 유닉스를 CLI 기반이긴 하지만 유저에게 친숙한 GUI도 제공한다.

	요즘의 운영체제들은 위 두가지 인터페이스 방식을 모두 제공한다.

	<br>

- _시스템 콜(System Call)_

	시스템 콜이라는 것도 인터페이스 중 하나인데 운영체제와 어플리케이션 사이에서 작동되는 인터페이스이다.

	프로그램들이 운영체제에게 어떻게 서비스를 요청하는지를 이 인터페이스를 통해 보여준다.

	다시 말해서 프로그램은 운영체제에게 서비스를 제공해 달라는 요청( 예를 들어, 하드웨어를 엑세스 해달라는 요청)을 해야만 한다. 유저가 직접 하드웨어에 접근할 수 없는 구조이기 때문이다.

	 ![운영체제9](https://user-images.githubusercontent.com/31889335/56051039-6f8da500-5d88-11e9-842e-3186bc0a3076.PNG)

	위 그림을 보면 새로운 프로세스를 생성하거나 종료할 때도 시스템 콜을 통해서 수행됨을 볼 수 있다. (프로세스 매니저가 시스템 콜에 요청 및 응답하는 구조)

	하드디스크에 접근해야 할 때도 시스템 콜을 통해 요청하고 응답받는 것도 볼 수 있다.

	( 운영체제들은 주로 high-level 언어인 C나 C++로 만들어진다. )

	즉, 정리해보면 운영체제 커널과 유저레벨 사이에 시스템 콜이 위치한다.

	위 그림을 통해 시스템 콜의 종류들에 대해 알아보자!

	- 프로세스 컨트롤 = 프로세스를 생성하고 종료시키는 일을 한다. 

	- 파일 관리자 = 파일들을 생성하고 삭제하고, 열고 닫으며 읽고 쓰는 일을 한다.

	- 메모리 관리자 = 메모리를 할당해주는 역할을 한다.

	- 데이터 유지자 = 타이머나 달력 정보를 세팅하거나 가져온다.

	- Communications = 네트워크 연결을 생성하고 삭제하며, 메시지를 보내거나 받는일을 한다.
	 
	<br>

- _시스템 콜이 하는일_

	__파일을 다른 파일로 복사한다!__

	<br>

- _시스템 콜과 API의 차이점_

	일단! __API__ 란 뭘까?

	__Application Program Interface__ 의 약자이다.

	풀어서 설명하면 어플리케이션을 개발하는 프로그래머들이 사용할 수 있도록 제공하는 __함수__ 들을 모아놓은 것을 말한다!

	프로그래머들이 API를 사용하는 이유는 OS 내부적으로 돌아가는 시스템 콜이 API에 의해 숨겨져 있기 때문에 시스템 콜의 동작을 알 필요가 없기 때문이다.

	>그런데 그럼 __라이브러리__ 랑 __API__ 의 차이점은 뭘까?

	__라이브러리__ = 특정 목적을 위해 별도로 제공되는 함수들의 모임으로 외부로 노출될 수도 있고, 내부에서도 돌아가는 형태이다.

	__API__ = 외부로 노출되는( = 인터페이스 역할을 하는) 함수들의 모음이다. 결국, API를 통해 라이브러리가 사용되는 것이다.

	<br>

- _가장 유명한 API들_

	- 윈도우 프로그래밍을 위한 Win32 API
	- 자바 가상 머신을 위한 Java API

	<br>

- _시스템 콜 vs API_

	![운영체제10](https://user-images.githubusercontent.com/31889335/56053046-f1340180-5d8d-11e9-8d6b-227206026929.PNG)

	일단 위 그림은 API를 설명한 그림이다.

	유저가 프로그램에서 printf() 라는 함수를 호출하면, 이 printf() 함수는 라이브러리에 구현되어 있다. 

	라이브러리의 printf() 함수를 보면 write() 라는 함수를 호출하는 것을 확인할 수 있는데 이대 write()라는 시스템 콜을 호출하는 것이다.

	여기서는 printf() 가 라이브러리 or API 역할을 한다고 보면 된다.

	write()는 시스템 콜이기 때문에 유저가 프로그램에서 직접 호출할 수도 있다.

	<br>

## 👏 시스템 콜 핸들링
---

- _시스템 콜을 핸들링하기 위해서는 __fork()__ 라는 시스템 콜이 실행된다_

	fork() 라는 시스템 콜은 프로세스를 하나 생성해주는 시스템 콜이다.

	<br>

## 📢 시스템 콜이 매개변수를 넘기는 과정(Passing)
---

- _시스템 콜은 어떤식으로 운영체제에게 자신의 매개변수를 넘겨줄까?_

	예를 들어, open() 이라는 시스템 콜을 호출하려면 open("/etc/passwd", O_RDONLY); 와 같은 코드를 작성해야 하는데 이때 open() 의 매개변수들을 어떻게 운영체제에게 넘겨주는 것일까

	(단, 시스템 콜과 운영체제에 따라서 요구되는 매개변수의 타입과 개수가 다양하다.)

	<br>

- _운영체제에게 매개변수를 넘겨주기 위한 3가지 방법!_

	- 파라미터를 레지스터에게 넘겨주기!

	- 매개변수들을 메모리 위의 테이블안에 저장해 놓았다가 레지스터에게 이 테이블의 주소를 넘겨주기!

	- 매개변수들을 프로그램의 스택에 push 해 놓고, 운영체제 스택으로 pop off 하기!





